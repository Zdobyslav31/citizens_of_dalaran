{% extends "base.html.twig" %}

{% block title %}
    {{ 'title.users'|trans }}
{% endblock %}
{% block content_title %}
    {{ 'title.users'|trans }}
{% endblock %}

{% block content %}

    {% if users is defined and users|length %}

        {% for user in users %}
            {% set current_role = 'user' %}
            {% for role in user.roles %}
                {% if role == "ROLE_SUPER_ADMIN" %}
                    {% set current_role = 'super_admin' %}
                {% elseif role == "ROLE_ADMIN" and current_role != 'super_admin' %}
                    {% set current_role = 'admin' %}
                {% elseif role == "ROLE_REDACTOR" and current_role != 'super_admin' and current_role != 'admin' %}
                    {% set current_role = 'redactor' %}
                {% endif %}
            {% endfor %}
            <div class="media mb-3">
                {% if user.profilePicturePath %}
                    <img class="mr-3 media-image" src="/uploads/user/profilepics/{{ user.profilePicturePath }}" alt="user {{ user.username }} profile image">
                {% else %}
                    {% image '../app/Resources/public/images/placeholder.png' %}
                        <img class="mr-3 media-image" src="{{ asset_url }}" alt="placeholder image">
                    {%  endimage %}
                {% endif %}
                <div class="media-body">
                    <h5 class="mt-0">
                        {% if current_role == 'user' %}
                            {{ user.username }}
                        {% else %}
                            <strong>{{ user.username }}</strong>
                                <br>
                                <small><em>{{ ('info.' ~ current_role)|trans }}</em></small>
                        {% endif %}
                    </h5>

                    <p class="mb-0">{{ 'profile.show.email'|trans({}, 'FOSUserBundle') }}: {{ user.email }}</p>
                    {% if user.name %}
                        <p class="mb-0">{{ 'profile.show.name'|trans }}: {{ user.name }}</p>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        {{ 'message.empty_list'|trans }}
    {% endif %}

{% endblock %}
